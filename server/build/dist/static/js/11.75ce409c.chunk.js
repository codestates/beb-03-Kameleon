(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[11],{186:function(e,n,t){"use strict";var r=t(12),c=t(0);n.a=function(e){var n=Object(c.useState)(!1),t=Object(r.a)(n,2),i=t[0],a=t[1],o=Object(c.useState)(!1),s=Object(r.a)(o,2),b=s[0],l=s[1],u=Object(c.useState)(!1),d=Object(r.a)(u,2),j=d[0],h=d[1],O=Object(c.useState)(!1),m=Object(r.a)(O,2),f=m[0],g=m[1],x=Object(c.useState)(""),v=Object(r.a)(x,2),p=v[0],k=v[1],w=Object(c.useState)(""),S=Object(r.a)(w,2),y=S[0],C=S[1],E=Object(c.useCallback)((function(n){var t;if(parseInt(p)||"Backspace"===p||"Delete"===p||"0"===p){C(n.target.value);var c=n.target.value.split("."),i=Object(r.a)(c,2)[1];i&&i.length>e?h(!0):h(!1)}else"."===p&&1===(null===(t=n.target.value.match(/\./g))||void 0===t?void 0:t.length)&&C(n.target.value);n.target.value?l(!1):l(!0),g(!0)}),[p,e]);return{tokenBalance:y,isFocus:i,isBlankError:b,isDecimalError:j,isChange:f,setIsChange:g,setTokenBalance:C,setKey:k,setIsFocus:a,changeInput:E}}},191:function(e,n,t){"use strict";var r=t(26),c=t.n(r),i=t(182),a=t(1);n.a=function(){var e=Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(i.a,{icon:!1})});return c.a.createPortal(e,document.body)}},359:function(e,n,t){"use strict";t.d(n,"b",(function(){return b})),t.d(n,"d",(function(){return l})),t.d(n,"a",(function(){return u})),t.d(n,"c",(function(){return d}));var r,c,i,a,o=t(14),s=t(13),b=s.b.div(r||(r=Object(o.a)(["\n  & > div {\n    border: 2px solid\n      ",";\n    border-radius: 1rem;\n    box-shadow: var(--shadowSharp);\n    background-color: var(--green);\n    padding: 1rem 1.5rem;\n  }\n\n  & > div > section {\n    display: flex;\n    justify-content: space-between;\n  }\n\n  & > div > section > label {\n    font-size: 0.8rem;\n    font-weight: 600;\n    color: var(--dark-green);\n  }\n\n  & > section {\n    margin-top: 0.2rem;\n    font-size: 0.8rem;\n    font-weight: 600;\n    color: var(--red);\n    text-align: right;\n  }\n\n  .icon {\n    color: white;\n    padding: 0.5rem 0.5rem;\n\n    :hover {\n      cursor: pointer;\n    }\n  }\n"])),(function(e){return e.isError?"var(--red)":e.isFocus?"var(--blue)":"var(--green)"})),l=s.b.div(c||(c=Object(o.a)(["\n  display: flex;\n\n  & > section {\n    display: flex;\n    align-items: center;\n  }\n\n  /* temp */\n  & > section > img {\n    margin-right: 0.5%;\n  }\n\n  & > section > div {\n    font-size: 1.2rem;\n    font-weight: 600;\n    color: var(--white);\n  }\n\n  & > input {\n    flex: auto;\n    width: 100%;\n    height: 2rem;\n    border: 0;\n    font-size: 1.2rem;\n    font-weight: 600;\n    color: var(--white);\n    background-color: var(--green);\n    outline: none;\n    text-align: right;\n\n    ::placeholder {\n      color: var(--dark-green);\n    }\n  }\n"]))),u=s.b.div(i||(i=Object(o.a)(["\n  margin: 0 -1.5rem;\n  height: 1rem;\n  border-bottom: 1px solid var(--dark-green);\n"]))),d=s.b.ul(a||(a=Object(o.a)(["\n  margin: 0 -1.5rem;\n  height: 20rem;\n  overflow-y: scroll;\n\n  ::-webkit-scrollbar {\n    display: none;\n  }\n\n  & > li {\n    color: var(--white);\n    padding: 1.5rem 1.5rem;\n\n    :hover {\n      cursor: pointer;\n      background-color: var(--dark-green);\n    }\n  }\n"])))},366:function(e,n,t){"use strict";t.d(n,"a",(function(){return o})),t.d(n,"b",(function(){return s}));var r,c,i=t(14),a=t(13),o=a.b.div(r||(r=Object(i.a)(["\n  & > div {\n    border: 2px solid\n      ",";\n    border-radius: 1rem;\n    box-shadow: var(--shadowSharp);\n    background-color: var(--green);\n    padding: 1rem 1.5rem;\n  }\n\n  & > div > section {\n    display: flex;\n    justify-content: space-between;\n  }\n\n  & > div > section > label {\n    font-size: 0.8rem;\n    font-weight: 600;\n    color: var(--dark-green);\n  }\n\n  & > section {\n    margin-top: 0.2rem;\n    font-size: 0.8rem;\n    font-weight: 600;\n    color: var(--red);\n    text-align: right;\n  }\n"])),(function(e){return e.isError?"var(--red)":e.isFocus?"var(--blue)":"var(--green)"})),s=a.b.div(c||(c=Object(i.a)(["\n  display: flex;\n\n  & > section {\n    display: flex;\n    align-items: center;\n  }\n\n  /* temp */\n  & > section > img {\n    margin-right: 0.5%;\n  }\n\n  & > section > div {\n    font-size: 1.2rem;\n    font-weight: 600;\n    color: var(--white);\n  }\n\n  & > input {\n    flex: auto;\n    width: 100%;\n    height: 2rem;\n    border: 0;\n    font-size: 1.2rem;\n    font-weight: 600;\n    color: var(--white);\n    background-color: var(--green);\n    outline: none;\n    text-align: right;\n\n    ::placeholder {\n      color: var(--dark-green);\n    }\n  }\n"])))},977:function(e,n,t){"use strict";t.r(n);var r,c,i,a,o,s=t(43),b=t(12),l=t(25),u=t.n(l),d=t(0),j=t(182),h=t(21),O=t(27),m=t(193),f=t.n(m),g=(t(214),t(14)),x=t(13),v=x.b.div(r||(r=Object(g.a)(["\n  max-width: var(--s-width);\n  margin: auto;\n  position: relative;\n\n  & > form {\n    padding: 1rem 2rem;\n    background-color: var(--white);\n    border-radius: 1rem;\n  }\n"]))),p=x.b.span(c||(c=Object(g.a)(["\n  position: absolute;\n  top: 1.3rem;\n  right: 0;\n  background-color: var(--gray);\n  border-radius: 0.25rem;\n  overflow: hidden;\n\n  & > button {\n    padding: 0.3rem 0.6rem;\n    color: var(--white);\n    font-size: 0.7rem;\n    border: 0;\n    background-color: transparent;\n\n    &.on {\n      background-color: var(--dark-green);\n    }\n\n    :hover {\n      cursor: pointer;\n    }\n  }\n"]))),k=x.b.dl(i||(i=Object(g.a)(["\n  margin-top: 1.5rem;\n  padding: 1rem;\n  border-top: 1px solid var(--green);\n\n  & > div {\n    display: flex;\n    font-size: 0.8rem;\n  }\n\n  & dt {\n    width: 35%;\n    color: var(--gray);\n  }\n\n  & dd {\n    width: 65%;\n    color: var(--green);\n    font-weight: 700;\n    text-align: right;\n  }\n"]))),w=x.b.div(a||(a=Object(g.a)(["\n  display: flex;\n  justify-content: center;\n  padding: 1rem 0;\n  color: var(--blue);\n"]))),S=x.b.button(o||(o=Object(g.a)(["\n  display: block;\n  padding: 1rem 2rem;\n  margin: auto;\n  margin-top: 1.5rem;\n  width: 100%;\n  color: var(--white);\n  font-weight: 700;\n  font-size: 1.2rem;\n  background-color: var(--dark-green);\n  border-radius: 1rem;\n  border: 0;\n  opacity: ",";\n\n  :hover {\n    cursor: ",";\n  }\n"])),(function(e){return e.numberA>0&&e.numberB>0&&!e.isErrorA&&!e.isErrorB?"":"0.7"}),(function(e){return e.numberA>0&&e.numberB>0&&!e.isErrorA&&!e.isErrorB?"pointer":""})),y=t(191),C=t(366),E=t(186),N=t(161),B=t(1),F=function(e){var n=e.children,t=e.liftState,r=e.otherBalance,c=e.otherPrice,i=e.otherChange,a=Object(d.useState)(0),o=Object(b.a)(a,2),s=o[0],l=o[1],u=Object(E.a)(2),j=u.tokenBalance,h=u.isFocus,O=u.isBlankError,m=u.isDecimalError,f=u.isChange,g=u.setIsChange,x=u.setTokenBalance,v=u.setKey,p=u.setIsFocus,k=u.changeInput;return Object(d.useEffect)((function(){Object(N.d)({address:window.klaytn.selectedAddress}).then((function(e){l(Number(e)/1e18)}))}),[]),Object(d.useEffect)((function(){t(j,1,"KLAY",f,m)}),[t,j,f,m]),Object(d.useEffect)((function(){if(i&&r*c/1!==0){var e=String(r*c/1).split("."),n=Object(b.a)(e,2)[1];n&&n.length>2?x(String((r*c/1).toFixed(2))):x(String(r*c/1)),g(!1)}}),[i,r,c,1,x,g]),Object(B.jsxs)(C.a,{isFocus:h,isError:O||m,children:[Object(B.jsxs)("div",{children:[Object(B.jsxs)("section",{children:[Object(B.jsx)("label",{htmlFor:"input",children:n}),"INPUT"===n&&Object(B.jsxs)("label",{htmlFor:"input",children:["Max ",s]})]}),Object(B.jsxs)(C.b,{children:[Object(B.jsx)("section",{children:Object(B.jsx)("div",{children:"KLAY"})}),Object(B.jsx)("input",{placeholder:"0.00",id:"input",autoComplete:"off",value:j,onKeyDown:function(e){return v(e.key)},onChange:function(e){return k(e)},onFocus:function(){return p(!0)},onBlur:function(){return p(!1)}})]})]}),m&&Object(B.jsxs)("section",{children:["Amount must be within ",2," decimal points"]}),O&&Object(B.jsx)("section",{children:"Required"})]})},A=t(359),P=t(156),T=O.b,I=O.a,K=function(e){var n=e.children,t=e.liftState,r=e.otherBalance,c=e.otherPrice,i=e.otherChange,a=Object(d.useState)(!1),o=Object(b.a)(a,2),s=o[0],l=o[1],u=Object(d.useState)("SELECT"),j=Object(b.a)(u,2),O=j[0],m=j[1],f=Object(d.useState)(7e22),g=Object(b.a)(f,2),x=g[0],v=g[1],p=Object(d.useState)([]),k=Object(b.a)(p,2),w=k[0],S=k[1],y=Object(d.useState)(0),C=Object(b.a)(y,2),F=C[0],K=C[1],z=Object(E.a)(6),U=z.tokenBalance,L=z.isFocus,D=z.isBlankError,Y=z.isDecimalError,M=z.isChange,R=z.setIsChange,q=z.setTokenBalance,J=z.setKey,G=z.setIsFocus,H=z.changeInput;Object(d.useEffect)((function(){Object(N.b)({contractName:"Oracle",contractAddress:P.b.Oracle,methodName:"getOraclePrice"}).then((function(e){for(var n=new Array,t=Object.keys(P.d),r=0;r<e.length;r++){var c={id:r,name:t[r],krwPrice:e[r]/1e18};n.push(c)}return n})).then((function(e){S(e),m(e[0].name),v(e[0].krwPrice)}))}),[]),Object(d.useEffect)((function(){Object(N.b)({contractName:"KStockToken",contractAddress:P.d[O],methodName:"balanceOf",parameters:[window.klaytn.selectedAddress]}).then((function(e){return K(e/1e18)}))}),[O]),Object(d.useEffect)((function(){t(U,x,O,M,Y)}),[t,U,x,O,M,Y]),Object(d.useEffect)((function(){if(i&&r*c/x!==0){var e=String(r*c/x).split("."),n=Object(b.a)(e,2)[1];n&&n.length>6?q(String((r*c/x).toFixed(6))):q(String(r*c/x)),R(!1)}}),[i,r,c,x,q,R]);var Q=Object(d.useCallback)((function(){l(!0),G(!0)}),[G]),V=Object(d.useCallback)((function(){l(!1),G(!1)}),[G]),W=Object(d.useCallback)((function(e,n){m(e),v(n)}),[]);return Object(B.jsxs)(A.b,{isFocus:L,isError:D||Y,children:[Object(B.jsxs)("div",{children:[Object(B.jsxs)("section",{children:[Object(B.jsx)("label",{htmlFor:"input",children:n}),"INPUT"===n&&Object(B.jsxs)("label",{htmlFor:"input",children:["Max ",F]})]}),Object(B.jsxs)(A.d,{children:[Object(B.jsxs)("section",{children:[Object(B.jsx)("div",{children:O}),s?Object(B.jsx)(h.a,{icon:T,className:"icon",onClick:V}):Object(B.jsx)(h.a,{icon:I,className:"icon",onClick:Q})]}),Object(B.jsx)("input",{placeholder:"0.000000",id:"input",autoComplete:"off",value:U,onKeyDown:function(e){return J(e.key)},onChange:function(e){return H(e)},onFocus:function(){return G(!0)},onBlur:function(){return G(!1)}})]}),s&&Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(A.a,{}),Object(B.jsx)(A.c,{children:w.map((function(e){return Object(B.jsx)("li",{onClick:function(){return W(e.name,e.krwPrice)},children:e.name},e.id)}))})]})]}),Y&&Object(B.jsx)("section",{children:"Amount must be within 6 decimal points"}),D&&Object(B.jsx)("section",{children:"Required"})]})},z=new f.a,U=O.c;n.default=function(){var e=Object(d.useState)("mint"),n=Object(b.a)(e,2),t=n[0],r=n[1],c=Object(d.useState)(""),i=Object(b.a)(c,2),a=i[0],o=i[1],l=Object(d.useState)(""),O=Object(b.a)(l,2),m=O[0],f=O[1],g=Object(d.useState)(0),x=Object(b.a)(g,2),C=x[0],E=x[1],A=Object(d.useState)(0),T=Object(b.a)(A,2),I=T[0],L=T[1],D=Object(d.useState)(""),Y=Object(b.a)(D,2),M=Y[0],R=Y[1],q=Object(d.useState)(""),J=Object(b.a)(q,2),G=J[0],H=J[1],Q=Object(d.useState)(!1),V=Object(b.a)(Q,2),W=V[0],X=V[1],Z=Object(d.useState)(!1),$=Object(b.a)(Z,2),_=$[0],ee=$[1],ne=Object(d.useState)(!1),te=Object(b.a)(ne,2),re=te[0],ce=te[1],ie=Object(d.useState)(!1),ae=Object(b.a)(ie,2),oe=ae[0],se=ae[1],be=Object(d.useState)(0),le=Object(b.a)(be,2),ue=le[0],de=le[1],je=Object(d.useState)(0),he=Object(b.a)(je,2),Oe=he[0],me=he[1],fe=function(){return j.b.success("SUCCESS!!!")},ge=function(){return j.b.error("FAIL!!!")},xe=Object(d.useCallback)((function(e,n,t,r,c){o(e),E(n),R(t),X(r),ce(c)}),[]),ve=Object(d.useCallback)((function(e,n,t,r,c){f(e),L(n),H(t),ee(r),se(c)}),[]),pe=Object(d.useCallback)(Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("mint"!==t){e.next=7;break}return e.next=3,Object(N.f)({contractName:"KStockToken",contractAddress:P.d[G],methodName:"mint",amount:a});case 3:e.sent instanceof Error===!1?fe():ge(),e.next=11;break;case 7:return e.next=9,Object(N.f)({contractName:"KStockToken",contractAddress:P.d[M],methodName:"burn",parameters:[z.utils.convertToPeb(a,"KLAY")]});case 9:e.sent instanceof Error===!1?fe():ge();case 11:case"end":return e.stop()}}),e)}))),[t,M,G,a]);return Object(d.useEffect)((function(){if(C>0&&I>0&&"mint"===t){var e=String(C/I).split("."),n=Object(b.a)(e,2)[1];n&&n.length>6?de(Number((C/I).toFixed(6))):de(C/I)}else if("burn"===t){var r=String(I/C).split("."),c=Object(b.a)(r,2)[1];c&&c.length>6?de(Number((I/C).toFixed(6))):de(I/C)}me(.01*+a)}),[t,C,I,a]),Object(B.jsxs)(v,{children:[Object(B.jsx)("h2",{className:"tit",children:"Mint & Burn"}),Object(B.jsxs)(p,{children:[Object(B.jsx)("button",{type:"button",onClick:function(){return r("mint")},className:"mint"===t?"on":"",children:"Mint"}),Object(B.jsx)("button",{type:"button",onClick:function(){return r("burn")},className:"burn"===t?"on":"",children:"Burn"})]}),Object(B.jsx)("form",{action:"",children:"mint"===t?Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(F,{liftState:xe,otherBalance:Number(m),otherPrice:I,otherChange:_,children:"INPUT"}),Object(B.jsx)(w,{children:Object(B.jsx)(h.a,{icon:U,className:"icon"})}),Object(B.jsx)(K,{liftState:ve,otherBalance:Number(a),otherPrice:C,otherChange:W,children:"OUTPUT"}),a&&m&&Object(B.jsxs)(k,{children:[Object(B.jsxs)("div",{children:[Object(B.jsx)("dt",{children:"Exchange Rate"}),Object(B.jsxs)("dd",{children:["1 KLAY = ",ue," ",G]})]}),Object(B.jsxs)("div",{children:[Object(B.jsx)("dt",{children:"Fee(1%)"}),Object(B.jsxs)("dd",{children:[Oe," ",M]})]})]}),Object(B.jsx)(S,{numberA:Number(a),numberB:Number(m),isErrorA:re,isErrorB:oe,type:"button",onClick:pe,children:"Mint"})]}):Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(K,{liftState:xe,otherBalance:Number(m),otherPrice:I,otherChange:_,children:"INPUT"}),Object(B.jsx)(w,{children:Object(B.jsx)(h.a,{icon:U,className:"icon"})}),Object(B.jsx)(F,{liftState:ve,otherBalance:Number(a),otherPrice:C,otherChange:W,children:"OUTPUT"}),a&&m&&Object(B.jsxs)(k,{children:[Object(B.jsxs)("div",{children:[Object(B.jsx)("dt",{children:"Exchange Rate"}),Object(B.jsxs)("dd",{children:["1 KLAY = ",ue," ",M]})]}),Object(B.jsxs)("div",{children:[Object(B.jsx)("dt",{children:"Fee"}),Object(B.jsx)("dd",{children:"10KLAY"})]})]}),Object(B.jsx)(S,{numberA:Number(a),numberB:Number(m),isErrorA:re,isErrorB:oe,type:"button",onClick:pe,children:"Burn"})]})}),Object(B.jsx)(y.a,{})]})}}}]);