(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[11],{185:function(e,n,t){"use strict";var r=t(12),a=t(0);n.a=function(e){var n=Object(a.useState)(!1),t=Object(r.a)(n,2),c=t[0],o=t[1],s=Object(a.useState)(!1),i=Object(r.a)(s,2),u=i[0],b=i[1],l=Object(a.useState)(!1),d=Object(r.a)(l,2),m=d[0],j=d[1],h=Object(a.useState)(!1),f=Object(r.a)(h,2),p=f[0],k=f[1],O=Object(a.useState)(""),x=Object(r.a)(O,2),v=x[0],g=x[1],w=Object(a.useState)(""),N=Object(r.a)(w,2),B=N[0],E=N[1],y=Object(a.useCallback)((function(n){var t;if(parseInt(v)||"Backspace"===v||"Delete"===v||"0"===v){E(n.target.value);var a=n.target.value.split("."),c=Object(r.a)(a,2)[1];c&&c.length>e?j(!0):j(!1)}else"."===v&&1===(null===(t=n.target.value.match(/\./g))||void 0===t?void 0:t.length)&&E(n.target.value);n.target.value?b(!1):b(!0),k(!0)}),[v,e]);return{tokenBalance:B,isFocus:c,isBlankError:u,isDecimalError:m,isChange:p,setIsChange:k,setTokenBalance:E,setKey:g,setIsFocus:o,changeInput:y}}},190:function(e,n,t){"use strict";var r=t(26),a=t.n(r),c=t(181),o=t(1);n.a=function(){var e=Object(o.jsx)(o.Fragment,{children:Object(o.jsx)(c.a,{icon:!1})});return a.a.createPortal(e,document.body)}},356:function(e,n,t){"use strict";t.d(n,"b",(function(){return u})),t.d(n,"d",(function(){return b})),t.d(n,"a",(function(){return l})),t.d(n,"c",(function(){return d}));var r,a,c,o,s=t(14),i=t(13),u=i.b.div(r||(r=Object(s.a)(["\n  & > div {\n    border: 2px solid\n      ",";\n    border-radius: 1rem;\n    box-shadow: var(--shadowSharp);\n    background-color: var(--green);\n    padding: 1rem 1.5rem;\n  }\n\n  & > div > section {\n    display: flex;\n    justify-content: space-between;\n  }\n\n  & > div > section > label {\n    font-size: 0.8rem;\n    font-weight: 600;\n    color: var(--dark-green);\n  }\n\n  & > section {\n    margin-top: 0.2rem;\n    font-size: 0.8rem;\n    font-weight: 600;\n    color: var(--red);\n    text-align: right;\n  }\n\n  .icon {\n    color: white;\n    padding: 0.5rem 0.5rem;\n\n    :hover {\n      cursor: pointer;\n    }\n  }\n"])),(function(e){return e.isError?"var(--red)":e.isFocus?"var(--blue)":"var(--green)"})),b=i.b.div(a||(a=Object(s.a)(["\n  display: flex;\n\n  & > section {\n    display: flex;\n    align-items: center;\n  }\n\n  /* temp */\n  & > section > img {\n    margin-right: 0.5%;\n  }\n\n  & > section > div {\n    font-size: 1.2rem;\n    font-weight: 600;\n    color: var(--white);\n  }\n\n  & > input {\n    flex: auto;\n    width: 100%;\n    height: 2rem;\n    border: 0;\n    font-size: 1.2rem;\n    font-weight: 600;\n    color: var(--white);\n    background-color: var(--green);\n    outline: none;\n    text-align: right;\n\n    ::placeholder {\n      color: var(--dark-green);\n    }\n  }\n"]))),l=i.b.div(c||(c=Object(s.a)(["\n  margin: 0 -1.5rem;\n  height: 1rem;\n  border-bottom: 1px solid var(--dark-green);\n"]))),d=i.b.ul(o||(o=Object(s.a)(["\n  margin: 0 -1.5rem;\n  height: 20rem;\n  overflow-y: scroll;\n\n  ::-webkit-scrollbar {\n    display: none;\n  }\n\n  & > li {\n    color: var(--white);\n    padding: 1.5rem 1.5rem;\n\n    :hover {\n      cursor: pointer;\n      background-color: var(--dark-green);\n    }\n  }\n"])))},978:function(e,n,t){"use strict";t.r(n);var r,a,c,o,s=t(44),i=t(12),u=t(43),b=t(25),l=t.n(b),d=t(0),m=t(181),j=t(21),h=t(27),f=t(4),p=t(192),k=t.n(p),O=(t(213),t(14)),x=t(13),v=x.b.div(r||(r=Object(O.a)(["\n  max-width: var(--s-width);\n  margin: auto;\n\n  & > form {\n    padding: 1rem 2rem;\n    background-color: var(--white);\n    border-radius: 1rem;\n  }\n"]))),g=x.b.dl(a||(a=Object(O.a)(["\n  margin-top: 1.5rem;\n  padding: 1rem;\n  border-top: 1px solid var(--green);\n\n  & > div {\n    display: flex;\n    font-size: 0.8rem;\n  }\n\n  & dt {\n    width: 35%;\n    color: var(--gray);\n  }\n\n  & dd {\n    width: 65%;\n    color: var(--green);\n    font-weight: 700;\n    text-align: right;\n  }\n"]))),w=x.b.div(c||(c=Object(O.a)(["\n  display: flex;\n  justify-content: center;\n  padding: 1rem 0;\n  color: var(--blue);\n"]))),N=x.b.button(o||(o=Object(O.a)(["\n  display: block;\n  padding: 1rem 2rem;\n  margin: auto;\n  margin-top: 1.5rem;\n  width: 100%;\n  color: var(--white);\n  font-weight: 700;\n  font-size: 1rem;\n  background-color: var(--dark-green);\n  border-radius: 1rem;\n  border: 0;\n  opacity: ",";\n\n  :hover {\n    cursor: ",";\n  }\n"])),(function(e){return e.numberA>0&&e.numberB>0&&!e.isErrorA&&!e.isErrorB?"":"0.7"}),(function(e){return e.numberA>0&&e.numberB>0&&!e.isErrorA&&!e.isErrorB?"pointer":""})),B=t(190),E=t(28),y=t(9),A=t(356),F=t(160),C=t(155),T=t(1),S=h.b,I=h.a,K=function(e){var n=e.children,t=e.tokenName,r=e.setTokenName,a=e.tokenBalance,c=e.isFocus,o=e.isBlankError,s=e.isDecimalError,u=(e.isChange,e.setIsChange,e.setTokenBalance,e.setKey),b=e.setIsFocus,l=e.changeInput,m=e.onCalculateInput,h=Object(f.g)(),p=Object(E.c)(y.e),k=Object(d.useState)(!1),O=Object(i.a)(k,2),x=O[0],v=O[1],g=Object(d.useState)([]),w=Object(i.a)(g,2),N=w[0],B=w[1],K=Object(d.useState)(0),L=Object(i.a)(K,2),Y=L[0],P=L[1];Object(d.useEffect)((function(){for(var e=new Array,n=Object.keys(C.d),t=0;t<n.length;t++){var a={id:t,name:n[t]};e.push(a)}e.push({id:t,name:"KLAY"}),B(e),r(h.token?h.token:e[t].name)}),[h.token,r]),Object(d.useEffect)((function(){"KLAY"===t?Object(F.d)({address:window.klaytn.selectedAddress}).then((function(e){P(Number((+e/Math.pow(10,18)).toFixed(2)))})):Object(F.b)({contractName:"KStockToken",contractAddress:C.d[t],methodName:"balanceOf",parameters:[window.klaytn.selectedAddress]}).then((function(e){return P(Number((+e/Math.pow(10,18)).toFixed(6)))}))}),[t,p]);var D=Object(d.useCallback)((function(){v(!0),b(!0)}),[b]),z=Object(d.useCallback)((function(){v(!1),b(!1)}),[b]),M=Object(d.useCallback)((function(e){r(e),m({name:e,tokenBalance:a})}),[m,a,r]);return Object(T.jsxs)(A.b,{isFocus:c,isError:o||s,children:[Object(T.jsxs)("div",{children:[Object(T.jsxs)("section",{children:[Object(T.jsx)("label",{htmlFor:"input",children:n}),"INPUT"===n&&Object(T.jsxs)("label",{htmlFor:"input",children:["Max ",Y]})]}),Object(T.jsxs)(A.d,{children:[Object(T.jsxs)("section",{children:[Object(T.jsx)("div",{children:t}),x?Object(T.jsx)(j.a,{icon:S,className:"icon",onClick:z}):Object(T.jsx)(j.a,{icon:I,className:"icon",onClick:D})]}),Object(T.jsx)("input",{placeholder:"0.000000",id:"input",autoComplete:"off",value:a,onKeyDown:function(e){return u(e.key)},onChange:function(e){var n=e.target.value;l(e),m({tokenName:t,tokenBalance:n})},onFocus:function(){return b(!0)},onBlur:function(){return b(!1)}})]}),x&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(A.a,{}),Object(T.jsx)(A.c,{children:N.map((function(e){return Object(T.jsx)("li",{onClick:function(){return M(e.name)},children:e.name},e.id)}))})]})]}),s&&Object(T.jsx)("section",{children:"Amount must be within 6 decimal points"}),o&&Object(T.jsx)("section",{children:"Required"})]})},L=t(185),Y=h.c,P=new k.a(window.klaytn),D=function(){var e=Object(u.a)(l.a.mark((function e(n,t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(F.b)({contractName:"Exchange",contractAddress:"".concat(C.c[n]),methodName:"getEthAmount",parameters:[P.utils.convertToPeb(t,"KLAY")]});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),z=function(){var e=Object(u.a)(l.a.mark((function e(n,t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(F.b)({contractName:"Exchange",contractAddress:"".concat(C.c[n]),methodName:"getTokenAmount",parameters:[t]});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();n.default=function(){var e=Object(f.g)(),n=void 0!==e.token?e.token:"kSSE",t=Object(d.useState)(n),r=Object(i.a)(t,2),a=r[0],c=r[1],o=Object(d.useState)(n),b=Object(i.a)(o,2),h=b[0],p=b[1],k=Object(d.useState)(!1),O=Object(i.a)(k,2),x=O[0],E=O[1],y=Object(d.useState)(""),A=Object(i.a)(y,2),S=A[0],I=A[1],M=function(){return m.b.success("SUCCESS!!!")},U=function(){return m.b.error("FAIL!!!")},J=Object(L.a)(6),R=J.tokenBalance,q=J.isFocus,V=J.isBlankError,W=J.isDecimalError,G=J.isChange,H=J.setIsChange,Q=J.setTokenBalance,X=J.setKey,Z=J.setIsFocus,$=J.changeInput,_={tokenName:a,setTokenName:c,tokenBalance:R,isFocus:q,isBlankError:V,isDecimalError:W,isChange:G,setIsChange:H,setTokenBalance:Q,setKey:X,setIsFocus:Z,changeInput:$},ee=Object(L.a)(6),ne=ee.tokenBalance,te=ee.isFocus,re=ee.isBlankError,ae=ee.isDecimalError,ce=ee.isChange,oe=ee.setIsChange,se=ee.setTokenBalance,ie=ee.setKey,ue=ee.setIsFocus,be=ee.changeInput,le={tokenName:h,setTokenName:p,tokenBalance:ne,isFocus:te,isBlankError:re,isDecimalError:ae,isChange:ce,setIsChange:oe,setTokenBalance:se,setKey:ie,setIsFocus:ue,changeInput:be},de=function(){var e=Object(u.a)(l.a.mark((function e(n){var t,r,c,o,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.tokenName,r=n.tokenBalance,c=function(){var e=Object(u.a)(l.a.mark((function e(n){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.tokenName,t=n.tokenBalance,!(Number(t)<=0)){e.next=4;break}return se("0"),e.abrupt("return");case 4:return e.next=6,z(h,P.utils.convertToPeb(t,"KLAY"));case 6:r=e.sent,se(Number(Number(r)/Math.pow(10,18)).toFixed(6)),I(Number(.003*+t).toFixed(3)+" "+a);case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),o=function(){var e=Object(u.a)(l.a.mark((function e(n){var t,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.tokenName,r=n.tokenBalance,!(Number(r)<=0)){e.next=4;break}return se("0"),e.abrupt("return");case 4:return e.next=6,D(t,r);case 6:c=e.sent,se(Number(Number(c)/Math.pow(10,18)).toFixed(6)),I(Number(.003*+r).toFixed(3)+" "+a);case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),s=function(){var e=Object(u.a)(l.a.mark((function e(n){var t,r,c,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.tokenName,""===(r=n.tokenBalance)&&(r="0"),!(+r>0)){e.next=17;break}return e.next=5,D(t,r);case 5:return c=e.sent,e.next=8,z(h,c);case 8:return o=e.sent,se((+o/Math.pow(10,18)).toString()),e.next=12,Object(F.c)({stockName:t});case 12:return e.sent,e.next=15,Object(F.c)({stockName:h});case 15:e.sent,I(Number(.006*+r).toFixed(3)+" "+a);case 17:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),"KLAY"!==a){e.next=12;break}if("KLAY"!==h){e.next=9;break}return e.abrupt("return",me({tokenName:t,tokenBalance:r}));case 9:return e.abrupt("return",c({tokenName:t,tokenBalance:r}));case 10:e.next=17;break;case 12:if("KLAY"!==h){e.next=16;break}return e.abrupt("return",o({tokenName:t,tokenBalance:r}));case 16:return e.abrupt("return",s({tokenName:t,tokenBalance:r}));case 17:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),me=function(){var e=Object(u.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.tokenName,n.tokenBalance,e.abrupt("return");case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();Object(d.useEffect)((function(){Object.keys(C.d).includes(a)?Object(F.c)({stockName:a}).then((function(e){return E(e)})):E(!0)}),[a]);var je=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x){e.next=5;break}return e.next=3,Object(F.e)({stockName:a});case 3:e.sent instanceof Error===!1?(E(!0),M()):U();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("KLAY"!==a){e.next=11;break}if("KLAY"!==h){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,Object(F.f)({contractName:"Exchange",contractAddress:C.c[h],methodName:"ethToTokenSwap",parameters:[P.utils.convertToPeb((.99*+ne).toFixed(15),"KLAY")],amount:R});case 7:e.sent instanceof Error===!1?M():U();case 9:e.next=22;break;case 11:if("KLAY"!==h){e.next=18;break}return e.next=14,Object(F.f)({contractName:"Exchange",contractAddress:C.c[a],methodName:"tokenToEthSwap",parameters:[P.utils.convertToPeb(R,"KLAY"),P.utils.convertToPeb((.99*+ne).toFixed(15),"KLAY")]});case 14:e.sent instanceof Error===!1?M():U(),e.next=22;break;case 18:return e.next=20,Object(F.f)({contractName:"Exchange",contractAddress:C.c[a],methodName:"tokenToTokenSwap",parameters:[P.utils.convertToPeb(R,"KLAY"),P.utils.convertToPeb((.99*+ne).toFixed(15),"KLAY"),C.d[h]]});case 20:e.sent instanceof Error===!1?M():U();case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(T.jsxs)(v,{children:[Object(T.jsx)("h2",{className:"tit",children:"Swap"}),Object(T.jsxs)("form",{action:"",children:[Object(T.jsx)(K,Object(s.a)(Object(s.a)({},_),{},{onCalculateInput:de,children:"INPUT"})),Object(T.jsx)(w,{children:Object(T.jsx)(j.a,{icon:Y,className:"icon"})}),Object(T.jsx)(K,Object(s.a)(Object(s.a)({},le),{},{onCalculateInput:me,children:"OUTPUT"})),R&&ne&&Object(T.jsx)(g,{children:Object(T.jsxs)("div",{children:[Object(T.jsx)("dt",{children:"\uc218\uc218\ub8cc"}),Object(T.jsx)("dd",{children:S})]})}),x?Object(T.jsx)(N,{numberA:Number(R),numberB:Number(ne),isErrorA:W,isErrorB:ae,type:"button",onClick:he,children:"SWAP"}):Object(T.jsx)(N,{numberA:Number(R),numberB:Number(ne),isErrorA:W,isErrorB:ae,type:"button",onClick:je,children:"APPROVE"})]}),Object(T.jsx)(B.a,{})]})}}}]);