(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[13],{186:function(e,n,t){"use strict";var r=t(12),c=t(0);n.a=function(e){var n=Object(c.useState)(!1),t=Object(r.a)(n,2),a=t[0],i=t[1],o=Object(c.useState)(!1),s=Object(r.a)(o,2),u=s[0],l=s[1],b=Object(c.useState)(!1),d=Object(r.a)(b,2),j=d[0],f=d[1],m=Object(c.useState)(!1),h=Object(r.a)(m,2),O=h[0],p=h[1],v=Object(c.useState)(""),g=Object(r.a)(v,2),x=g[0],k=g[1],w=Object(c.useState)(""),y=Object(r.a)(w,2),N=y[0],E=y[1],C=Object(c.useCallback)((function(n){var t;if(parseInt(x)||"Backspace"===x||"Delete"===x||"0"===x){E(n.target.value);var c=n.target.value.split("."),a=Object(r.a)(c,2)[1];a&&a.length>e?f(!0):f(!1)}else"."===x&&1===(null===(t=n.target.value.match(/\./g))||void 0===t?void 0:t.length)&&E(n.target.value);n.target.value?l(!1):l(!0),p(!0)}),[x,e]);return{tokenBalance:N,isFocus:a,isBlankError:u,isDecimalError:j,isChange:O,setIsChange:p,setTokenBalance:E,setKey:k,setIsFocus:i,changeInput:C}}},191:function(e,n,t){"use strict";var r=t(26),c=t.n(r),a=t(182),i=t(1);n.a=function(){var e=Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(a.a,{icon:!1})});return c.a.createPortal(e,document.body)}},976:function(e,n,t){"use strict";t.r(n);var r,c,a,i,o,s,u,l,b,d=t(43),j=t(12),f=t(25),m=t.n(f),h=t(0),O=t(4),p=t(28),v=t(182),g=t(21),x=t(27),k=t(193),w=t.n(k),y=(t(214),t(14)),N=t(13),E=N.b.div(r||(r=Object(y.a)(["\n  max-width: var(--s-width);\n  margin: auto;\n  position: relative;\n\n  & > form {\n    padding: 1rem 2rem;\n    background-color: var(--white);\n    border-radius: 1rem;\n  }\n"]))),C=N.b.span(c||(c=Object(y.a)(["\n  position: absolute;\n  top: 1.3rem;\n  right: 0;\n  background-color: var(--gray);\n  border-radius: 0.25rem;\n  overflow: hidden;\n\n  & > button {\n    width: 3.5rem;\n    padding: 0.3rem 0.6rem;\n    color: var(--white);\n    font-size: 0.7rem;\n    border: 0;\n    background-color: transparent;\n\n    &.on {\n      background-color: var(--dark-green);\n    }\n\n    :hover {\n      cursor: pointer;\n    }\n  }\n"]))),A=N.b.div(a||(a=Object(y.a)(["\n  display: flex;\n  justify-content: center;\n  padding: 1rem 0;\n  color: var(--blue);\n"]))),B=N.b.div(i||(i=Object(y.a)(["\n  padding: 1rem 1.5rem;\n  border-radius: 1rem;\n  font-weight: 600;\n  color: var(--white);\n  background-color: var(--green);\n\n  & > label {\n    font-size: 0.8rem;\n    font-weight: 600;\n    color: var(--dark-green);\n  }\n\n  & > div {\n    display: flex;\n    align-items: center;\n    height: 2rem;\n  }\n"]))),S=N.b.button(o||(o=Object(y.a)(["\n  display: block;\n  padding: 1rem 2rem;\n  margin: auto;\n  margin-top: 1.5rem;\n  width: 100%;\n  color: var(--white);\n  font-weight: 700;\n  font-size: 1rem;\n  background-color: var(--dark-green);\n  border-radius: 1rem;\n  border: 2px solid var(--dark-green);\n\n  :hover {\n    cursor: pointer;\n    border: 2px solid var(--blue);\n  }\n\n  &.liquidity__addbutton {\n    opacity: ",";\n\n    :hover {\n      border: ",";\n    }\n  }\n\n  &.liquidity__removebutton {\n    opacity: ",";\n\n    :hover {\n      border: ",";\n    }\n  }\n"])),(function(e){return Number(e.balanceA)>0&&Number(e.balanceB)>0&&!e.isErrorA&&!e.isErrorB?"":"0.7"}),(function(e){return Number(e.balanceA)>0&&Number(e.balanceB)>0&&!e.isErrorA&&!e.isErrorB?"2px solid var(--blue)":"2px solid var(--dark-green)"}),(function(e){return Number(e.balanceA)>0&&!e.isErrorA?"":"0.7"}),(function(e){return Number(e.balanceA)>0&&!e.isErrorA?"2px solid var(--blue)":"2px solid var(--dark-green)"})),F=t(191),D=N.b.div(s||(s=Object(y.a)(["\n  & > div {\n    border: 2px solid\n      ",";\n    border-radius: 1rem;\n    background-color: var(--green);\n    padding: 1rem 1.5rem;\n  }\n\n  & > div > section {\n    display: flex;\n    justify-content: space-between;\n  }\n\n  & > div > section > label {\n    font-size: 0.8rem;\n    font-weight: 600;\n    color: var(--dark-green);\n  }\n\n  & > section {\n    margin-top: 0.2rem;\n    font-size: 0.8rem;\n    font-weight: 600;\n    color: var(--red);\n    text-align: right;\n  }\n"])),(function(e){return e.isError?"var(--red)":e.isFocus?"var(--blue)":"var(--green)"})),K=N.b.div(u||(u=Object(y.a)(["\n  display: flex;\n\n  & > section {\n    display: flex;\n    align-items: center;\n  }\n\n  /* temp */\n  & > section > img {\n    margin-right: 0.5%;\n  }\n\n  & > section > div {\n    font-size: 1.2rem;\n    font-weight: 600;\n    color: var(--white);\n  }\n\n  & > input {\n    flex: auto;\n    width: 100%;\n    height: 2rem;\n    border: 0;\n    font-size: 1.2rem;\n    font-weight: 600;\n    color: var(--white);\n    background-color: var(--green);\n    outline: none;\n    text-align: right;\n\n    ::placeholder {\n      color: var(--dark-green);\n    }\n  }\n"]))),I=t(161),T=t(186),L=t(156),z=t(1),q=function(e){var n=e.children,t=e.liftState,r=e.otherBalance,c=e.otherChange,a=e.isKlay,i=e.ratio,o=e.numberOfDecimal,s=Object(O.g)().id,u=Object(h.useState)(""),l=Object(j.a)(u,2),b=l[0],d=l[1],f=Object(h.useState)(0),m=Object(j.a)(f,2),p=m[0],v=m[1],g=Object(T.a)(o),x=g.tokenBalance,k=g.isFocus,w=g.isBlankError,y=g.isDecimalError,N=g.isChange,E=g.setIsChange,C=g.setTokenBalance,A=g.setKey,B=g.setIsFocus,S=g.changeInput;return Object(h.useEffect)((function(){void 0!==s&&d(s)}),[s]),Object(h.useEffect)((function(){window.klaytn.selectedAddress&&(a?Object(I.d)({address:window.klaytn.selectedAddress}).then((function(e){v(Number((Number(e)/1e18).toFixed(2)))})):void 0!==b&&Object(I.b)({contractName:"KStockToken",contractAddress:L.d[b],methodName:"balanceOf",parameters:[window.klaytn.selectedAddress]}).then((function(e){return v(Number((e/1e18).toFixed(6)))})))}),[b,a]),Object(h.useEffect)((function(){t(x,N,y)}),[t,x,N,y]),Object(h.useEffect)((function(){if(c&&a){var e=String(r/i/1.01).split("."),n=Object(j.a)(e,2)[1];n&&n.length>o?C((r/i/1.01).toFixed(o)):C(String(r/i/1.01)),E(!1)}else if(c&&!a){var t=String(r*i*1.01).split("."),s=Object(j.a)(t,2)[1];s&&s.length>o?C((r*i*1.01).toFixed(o)):C(String(r*i*1.01)),E(!1)}}),[c,r,a,i,o,E,C]),Object(z.jsxs)(D,{isFocus:k,isError:w||y,children:[Object(z.jsxs)("div",{children:[Object(z.jsxs)("section",{children:[Object(z.jsx)("label",{htmlFor:b+a,children:n}),"INPUT"===n&&Object(z.jsxs)("label",{htmlFor:b+a,children:["Max ",p]})]}),Object(z.jsxs)(K,{children:[Object(z.jsx)("section",{children:Object(z.jsx)("div",{children:a?"KLAY":b})}),Object(z.jsx)("input",{placeholder:"0.00",id:b+a,autoComplete:"off",value:x,onKeyDown:function(e){return A(e.key)},onChange:function(e){return S(e)},onFocus:function(){return B(!0)},onBlur:function(){return B(!1)}})]})]}),y&&Object(z.jsxs)("section",{children:["Amount must be within ",o," decimal points"]}),w&&Object(z.jsx)("section",{children:"Required"})]})},P=N.b.div(l||(l=Object(y.a)(["\n  & > div {\n    border: 2px solid\n      ",";\n    border-radius: 1rem;\n    background-color: var(--green);\n    padding: 1rem 1.5rem;\n  }\n\n  & > div > section {\n    display: flex;\n    justify-content: space-between;\n  }\n\n  & > div > section > label {\n    font-size: 0.8rem;\n    font-weight: 600;\n    color: var(--dark-green);\n  }\n\n  & > section {\n    margin-top: 0.2rem;\n    font-size: 0.8rem;\n    font-weight: 600;\n    color: var(--red);\n    text-align: right;\n  }\n"])),(function(e){return e.isError?"var(--red)":e.isFocus?"var(--blue)":"var(--green)"})),U=N.b.div(b||(b=Object(y.a)(["\n  display: flex;\n\n  & > section {\n    display: flex;\n    align-items: center;\n  }\n\n  /* temp */\n  & > section > img {\n    margin-right: 0.5%;\n  }\n\n  & > section > div {\n    width: 10rem;\n    font-size: 1rem;\n    font-weight: 600;\n    color: var(--white);\n  }\n\n  & > input {\n    flex: auto;\n    width: 100%;\n    height: 2rem;\n    border: 0;\n    font-size: 1.2rem;\n    font-weight: 600;\n    color: var(--white);\n    background-color: var(--green);\n    outline: none;\n    text-align: right;\n\n    ::placeholder {\n      color: var(--dark-green);\n    }\n  }\n"]))),_=function(e){var n=e.children,t=e.liftState,r=e.numberOfDecimal,c=Object(O.g)().id,a=Object(h.useState)(""),i=Object(j.a)(a,2),o=i[0],s=i[1],u=Object(h.useState)(0),l=Object(j.a)(u,2),b=l[0],d=l[1],f=Object(T.a)(r),m=f.tokenBalance,p=f.isFocus,v=f.isBlankError,g=f.isDecimalError,x=f.isChange,k=f.setKey,w=f.setIsFocus,y=f.changeInput;return Object(h.useEffect)((function(){void 0!==c&&s(c)}),[c]),Object(h.useEffect)((function(){window.klaytn.selectedAddress&&Object(I.b)({contractName:"Exchange",contractAddress:L.c[o],methodName:"balanceOf",parameters:[window.klaytn.selectedAddress]}).then((function(e){d(Number((Number(e)/1e18).toFixed(6)))})).catch((function(e){}))}),[o]),Object(h.useEffect)((function(){t(m,x,g)}),[t,m,x,g]),Object(z.jsxs)(P,{isFocus:p,isError:v||g,children:[Object(z.jsxs)("div",{children:[Object(z.jsxs)("section",{children:[Object(z.jsx)("label",{htmlFor:"input",children:n}),"INPUT"===n&&Object(z.jsxs)("label",{htmlFor:"input",children:["Max ",b]})]}),Object(z.jsxs)(U,{children:[Object(z.jsx)("section",{children:Object(z.jsxs)("div",{children:["KLAY + ",o," LPT"]})}),Object(z.jsx)("input",{placeholder:"0.00",id:"input",autoComplete:"off",value:m,onKeyDown:function(e){return k(e.key)},onChange:function(e){return y(e)},onFocus:function(){return w(!0)},onBlur:function(){return w(!1)}})]})]}),g&&Object(z.jsxs)("section",{children:["Amount must be within ",r," decimal points"]}),v&&Object(z.jsx)("section",{children:"Required"})]})},R=t(9),Y=new w.a,M=function(){var e=Object(p.b)(),n=Object(h.useCallback)(function(){var e=Object(d.a)(m.a.mark((function e(n,t,r){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.f)({contractName:"Exchange",contractAddress:L.c[n],methodName:"addLiquidity",amount:t,parameters:[Y.utils.toBN(1e18*Number(r))]});case 2:return c=e.sent,e.abrupt("return",c);case 4:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),[]),t=Object(h.useCallback)((function(e,n){return Object(I.f)({contractName:"Exchange",contractAddress:L.c[e],methodName:"removeLiquidity",parameters:[Y.utils.convertToPeb(n,"KLAY")]})}),[]),r=Object(h.useCallback)(Object(d.a)(m.a.mark((function n(){var t;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("undefined"===typeof window.klaytn){n.next=11;break}if(!window.klaytn.isKaikas){n.next=8;break}return n.next=4,window.klaytn.enable();case 4:t=n.sent,e(Object(R.b)(t[0])),n.next=9;break;case 8:e(Object(R.c)());case 9:n.next=13;break;case 11:e(Object(R.c)()),alert("Kaikas \uc124\uce58\ud558\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4.");case 13:case"end":return n.stop()}}),n)}))),[e]),c=Object(h.useCallback)(function(){var e=Object(d.a)(m.a.mark((function e(n){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.e)({stockName:n});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[]);return{addButton:n,removeButton:t,connectButton:r,approveButton:c}},J=x.h,G=x.c,H=new w.a;n.default=function(){var e=Object(O.g)().id,n=Object(h.useState)("deposit"),t=Object(j.a)(n,2),r=t[0],c=t[1],a=Object(h.useState)(""),i=Object(j.a)(a,2),o=i[0],s=i[1],u=Object(h.useState)(!1),l=Object(j.a)(u,2),b=l[0],f=l[1],x=Object(h.useState)(0),k=Object(j.a)(x,2),w=k[0],y=k[1],N=Object(h.useState)({klayBalance:0,kStockBalance:0}),D=Object(j.a)(N,2),K=D[0],T=D[1],P=Object(h.useState)({balance:"",isChange:!1,isDecimalError:!1}),U=Object(j.a)(P,2),R=U[0],Y=U[1],Q=Object(h.useState)({balance:"",isChange:!1,isDecimalError:!1}),V=Object(j.a)(Q,2),W=V[0],X=V[1],Z=Object(h.useState)({balance:"",isChange:!1,isDecimalError:!1}),$=Object(j.a)(Z,2),ee=$[0],ne=$[1],te=M(),re=te.addButton,ce=te.removeButton,ae=te.connectButton,ie=te.approveButton,oe=Object(p.c)((function(e){return e.user})),se=function(){return v.b.success("SUCCESS!!!")},ue=function(){return v.b.error("FAIL!!!")},le=Object(h.useCallback)((function(e,n,t){Y({balance:e,isChange:n,isDecimalError:t})}),[]),be=Object(h.useCallback)((function(e,n,t){X({balance:e,isChange:n,isDecimalError:t})}),[]),de=Object(h.useCallback)((function(e,n,t){ne({balance:e,isChange:n,isDecimalError:t})}),[]);return Object(h.useEffect)((function(){void 0!==e&&s(e)}),[e]),Object(h.useEffect)((function(){var e=function(){var e=Object(d.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.c)({stockName:o});case 2:n=e.sent,f(!!n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();window.klaytn.selectedAddress&&e()}),[o,oe]),Object(h.useEffect)((function(){var e=function(){var e=Object(d.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.b)({contractName:"Exchange",contractAddress:L.c[o],methodName:"getMinimumTokenAmountToAddLiquidity",parameters:[H.utils.toBN(1e9)]});case 2:n=e.sent,y(n/1e9);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();""!==o&&e()}),[o,R]),Object(h.useEffect)((function(){var e=function(){var e=Object(d.a)(m.a.mark((function e(n,t){var r,c,a,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.d)({address:L.c[n]});case 2:return r=e.sent,e.next=5,Object(I.b)({contractName:"KStockToken",contractAddress:L.d[n],methodName:"balanceOf",parameters:[L.c[n]]});case 5:return c=e.sent,e.next=8,Object(I.b)({contractName:"Exchange",contractAddress:L.c[n],methodName:"totalSupply"});case 8:a=e.sent,i=1e18*Number(t)/Number(a),T({klayBalance:Number((Number(r)*i/1e18).toFixed(2)),kStockBalance:Number((Number(c)*i/1e18).toFixed(6))});case 11:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();Number(ee.balance)>0&&e(o,Number(ee.balance))}),[o,ee.balance]),Object(z.jsxs)(E,{children:[Object(z.jsx)("h2",{className:"tit",children:"Liquidity"}),Object(z.jsxs)(C,{children:[Object(z.jsx)("button",{type:"button",onClick:function(){return c("deposit")},className:"deposit"===r?"on":"",children:"Add"}),Object(z.jsx)("button",{type:"button",onClick:function(){return c("withdrawal")},className:"withdrawal"===r?"on":"",children:"Remove"})]}),Object(z.jsx)("form",{action:"",children:"deposit"===r?Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)("div",{children:[Object(z.jsx)(q,{liftState:le,otherBalance:Number(W.balance),otherChange:W.isChange,isKlay:!0,ratio:w,numberOfDecimal:2,children:"INPUT"}),Object(z.jsx)(A,{children:Object(z.jsx)(g.a,{icon:J,className:"icon"})}),Object(z.jsx)(q,{liftState:be,otherBalance:Number(R.balance),otherChange:R.isChange,isKlay:!1,ratio:w,numberOfDecimal:6,children:"INPUT"})]}),oe.isLogin?b?Object(z.jsx)(S,{className:"liquidity__addbutton",type:"button",balanceA:R.balance,balanceB:W.balance,isErrorA:R.isDecimalError,isErrorB:W.isDecimalError,onClick:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re(o,R.balance,W.balance);case 2:e.sent instanceof Error===!1?se():ue();case 4:case"end":return e.stop()}}),e)}))),children:"Add"}):Object(z.jsx)(S,{type:"button",onClick:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie(o);case 2:e.sent instanceof Error===!1?(f(!0),se()):ue();case 4:case"end":return e.stop()}}),e)}))),children:"Approve"}):Object(z.jsx)(S,{type:"button",onClick:ae,children:"Connect"})]}):Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)("div",{children:[Object(z.jsx)(_,{liftState:de,numberOfDecimal:6,children:"INPUT"}),Object(z.jsx)(A,{children:Object(z.jsx)(g.a,{icon:G,className:"icon"})}),Object(z.jsxs)(B,{children:[Object(z.jsx)("label",{children:"OUTPUT"}),Object(z.jsxs)("div",{children:[K.klayBalance," KLAY + ",K.kStockBalance," ",o]})]})]}),oe.isLogin?Object(z.jsx)(S,{className:"liquidity__removebutton",type:"button",balanceA:ee.balance,isErrorA:ee.isDecimalError,onClick:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce(o,ee.balance);case 2:e.sent instanceof Error===!1?se():ue();case 4:case"end":return e.stop()}}),e)}))),children:"Remove"}):Object(z.jsx)(S,{onClick:ae,type:"button",children:"Connect"})]})}),Object(z.jsx)(F.a,{})]})}}}]);