(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[12],{192:function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));var a=t(35);function r(e,n){if(null==e)return{};var t,r,c=Object(a.a)(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(c[t]=e[t])}return c}},215:function(e,n,t){"use strict";t(0);var a,r=t(14),c=t(13).b.img(a||(a=Object(r.a)(["\n  /* width: 70px; */\n  height: 20px;\n  max-width: 60px;\n  margin-left: 5px;\n  margin-right: 5px;\n  @media (max-width: 760px) {\n    display: none;\n  }\n"]))),o=t(156),s=t(1);n.a=function(e){var n=e.stockName;return Object(s.jsx)(c,{src:""+"/stockLogo/".concat(o.f[n])})}},368:function(e,n,t){"use strict";t.d(n,"a",(function(){return r})),t.d(n,"b",(function(){return c}));var a=t(156),r=function(e){var n=e.contractName,t=e.methodName;return a.a[n].filter((function(e){return e.name===t}))[0].outputs[0].components},c=function(e){var n=e.type,t=e.value,a=e.totalSupply,r=void 0===a?void 0:a,c={};return n.forEach((function(e,n){c[e.name]=t[n]})),void 0!==r&&(c.totalSupply=r),c}},978:function(e,n,t){"use strict";t.r(n);var a,r,c,o,s=t(44),i=t(192),l=t(43),d=t(12),u=t(25),b=t.n(u),m=t(0),p=t.n(m),j=t(14),f=t(13),h=f.b.div(a||(a=Object(j.a)(["\n  max-width: var(--width);\n  margin: 0 auto;\n  color: var(--dark-green);\n\n  & > .subtit {\n    margin-top: 2rem;\n    margin-bottom: 1rem;\n    font-size: 1.5rem;\n    color: var(--white);\n  }\n\n  .pool__balance,\n  .asset__value {\n    flex: 1.5;\n  }\n\n  .pool__balance {\n    @media (max-width: 760px) {\n      display: none;\n    }\n  }\n\n  .mypage__bar {\n    width: 80%;\n  }\n"]))),O=f.b.ul(r||(r=Object(j.a)(["\n  border-radius: 0.5rem;\n  background-color: var(--white);\n\n  & > div {\n    display: flex;\n    padding: 1rem 2rem;\n    border-bottom: 2px solid var(--green);\n    font-size: 1.2rem;\n    font-weight: 600;\n  }\n\n  & > div > span {\n    flex: 1;\n    text-align: right;\n    color: var(--green);\n    padding-left: 0.5rem;\n\n    :first-of-type {\n      text-align: left;\n      padding-left: 0;\n    }\n  }\n\n  @media (max-width: 760px) {\n    & > div {\n      padding: 0.6rem 0.8rem;\n    }\n  }\n"]))),x=f.b.li(c||(c=Object(j.a)(["\n  display: flex;\n  padding: 1rem 2rem;\n  border-bottom: 1px solid var(--white);\n  font-size: 1.2rem;\n  font-weight: 600;\n\n  & > div {\n    flex: 1;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    overflow: hidden;\n    width: 1rem;\n    padding-left: 0.5rem;\n    text-align: right;\n    flex-basis: 1rem;\n    overflow: auto;\n\n    :first-of-type {\n      padding-left: 0;\n      text-align: left;\n    }\n\n    &.mypage__bar {\n      padding: 0 24px;\n    }\n  }\n\n  :last-of-type {\n    border: 0;\n  }\n\n  @media (max-width: 760px) {\n    padding: 0.6rem 0.8rem;\n  }\n"]))),v=f.b.div(o||(o=Object(j.a)(["\n  margin: 0 0.5rem 0 0.5rem;\n  display: flex;\n  flex: 4 !important;\n  /* margin-left: -2rem; */\n  background-color: var(--white);\n\n  & > div {\n    &:first-of-type {\n      width: ",";\n      background-color: var(--blue);\n    }\n\n    &:last-of-type {\n      width: ",";\n      background-color: var(--red);\n    }\n  }\n"])),(function(e){var n=e.yes/+e.totalSupply*100;return"".concat(n,"%")}),(function(e){var n=e.no/+e.totalSupply*100;return"".concat(n,"%")})),g=t(161),w=t(156),k=t(193),y=t.n(k),N=t(45),S=t.n(N),_=t(4),A=t(215),P=t(28),L=t(9),K=t(1),G=function(e){var n=e.id,t=e.name,a=e.lpToken,r=e.balance,c=p.a.useState(0),o=Object(d.a)(c,2),s=o[0],i=o[1],u=Object(_.f)(),m=Object(P.b)();p.a.useEffect((function(){var e=function(){var e=Object(l.a)(b.a.mark((function e(){var n,a,r,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("/api/contract/getPoolRoi",{params:{exchangeAddress:w.c[t]}});case 2:n=e.sent,a=n.data,r=a.success,c=a.data,!0===r&&i(c.roi);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t]);return Object(K.jsxs)(x,{onClick:function(){u("/liquidity/".concat(t)),m(Object(L.d)("pool"))},children:[Object(K.jsxs)("div",{children:[Object(K.jsx)(A.a,{stockName:t}),t," "," <-> "," ",Object(K.jsx)(A.a,{stockName:"KLAY"}),"KLAY"]}),Object(K.jsxs)("div",{children:[a," LPT"]}),Object(K.jsx)("div",{className:"pool__balance",children:r}),Object(K.jsxs)("div",{children:[s,"%"]})]},n)},T=t(367),E=t.n(T),R=t(368),I=function(){var e=p.a.useState([]),n=Object(d.a)(e,2),t=n[0],a=n[1];return p.a.useEffect((function(){var e=function(){var e=Object(l.a)(b.a.mark((function e(){var n,t,r,c,o,s,i,l,u,m;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(g.b)({contractName:"Govern",contractAddress:w.b.Govern,methodName:"getPollsLength"});case 3:n=e.sent,t=[],r=Object(R.a)({contractName:"Govern",methodName:"getPollState"}),c=n-1;case 7:if(!(c>=0)){e.next=32;break}return e.t0=Promise,e.next=11,Object(g.b)({contractName:"Govern",contractAddress:w.b.Govern,methodName:"getPollState",parameters:[c]});case 11:return e.t1=e.sent,e.next=14,Object(g.b)({contractName:"Govern",contractAddress:w.b.Govern,methodName:"withdrawableBalance",parameters:[c],kaikas:!0});case 14:return e.t2=e.sent,e.next=17,Object(g.b)({contractName:"Govern",contractAddress:w.b.Govern,methodName:"getTotalSupply"});case 17:return e.t3=e.sent,e.t4=[e.t1,e.t2,e.t3],e.next=21,e.t0.all.call(e.t0,e.t4);case 21:o=e.sent,s=Object(d.a)(o,3),i=s[0],l=s[1],u=s[2],(m=Object(R.b)({type:r,value:i,totalSupply:u})).withdrawableBalance=l,l>0&&t.push(m);case 29:c--,e.next=7;break;case 32:a(t),e.next=37;break;case 35:e.prev=35,e.t5=e.catch(0);case 37:case"end":return e.stop()}}),e,null,[[0,35]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(K.jsx)(K.Fragment,{children:t.map((function(e){e.pollId;var n=e.title,t=e.agree,a=e.disagree,r=e.endTime,c=e.totalSupply;return Object(K.jsxs)(x,{children:[Object(K.jsx)("div",{children:n}),Object(K.jsxs)(v,{className:"mypage__bar",yes:t,no:a,totalSupply:c,children:[Object(K.jsx)("div",{}),Object(K.jsx)("div",{})]}),Object(K.jsx)("div",{children:Object(K.jsx)(E.a,{fromNow:!0,children:1e3*+r})})]},"myPageItem"+n)}))})},Y=["id"],B=new y.a;n.default=function(){var e=Object(m.useState)([]),n=Object(d.a)(e,2),t=n[0],a=n[1],r=Object(m.useState)([]),c=Object(d.a)(r,2),o=c[0],u=c[1],p=Object(_.f)(),j=Object(P.b)();Object(m.useEffect)((function(){var e=function(){var e=Object(l.a)(b.a.mark((function e(){var n,t,r,c,o,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.b)({contractName:"Oracle",contractAddress:w.b.Oracle,methodName:"getOraclePrice"});case 2:for(n=e.sent,t=Object.keys(w.d),r=[],c=[],o=function(e){r.push(Object(g.b)({contractName:"KStockToken",contractAddress:w.d[t[e]],methodName:"balanceOf",parameters:[window.klaytn.selectedAddress]}).then((function(a){a>0&&c.push({id:e,name:t[e],balance:a/1e18,value:Number(n[e])/1e18})})))},s=0;s<t.length;s++)o(s);return e.next=10,Promise.all(r);case 10:a(c);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n=function(){var e=Object(l.a)(b.a.mark((function e(){var n,t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],t=[],Object.entries(w.c).forEach((function(e){n.push(Object(g.b)({contractName:"Exchange",contractAddress:e[1],methodName:"balanceOf",parameters:[window.klaytn.selectedAddress]}).then((function(n){n>0&&t.push({name:e[0],lpAmount:n})})))})),e.next=5,Promise.all(n);case 5:a=[],t.forEach(function(){var e=Object(l.a)(b.a.mark((function e(n,t){var r,c,o,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=[]).push(Object(g.d)({address:w.c[n.name]}).then((function(e){c=e}))),r.push(Object(g.b)({contractName:"KStockToken",contractAddress:w.d[n.name],methodName:"balanceOf",parameters:[w.c[n.name]]}).then((function(e){o=e}))),r.push(Object(g.b)({contractName:"Exchange",contractAddress:w.c[n.name],methodName:"totalSupply"}).then((function(e){s=e}))),Promise.all(r).then((function(){var e=Number(n.lpAmount)/Number(s);a.push({id:t,name:n.name,lpToken:B.utils.convertFromPeb(n.lpAmount.slice(0,-15),"kpeb"),balance:"".concat((Number(c)*e/1e18).toLocaleString("ko-KR"),"KLY + ").concat((Number(o)*e/1e18).toLocaleString("ko-KR")).concat(n.name," ")}),u([].concat(a))}));case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}());case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),n()}),[window.klaytn.selectedAddress]);return Object(K.jsx)("div",{children:Object(K.jsxs)(h,{children:[Object(K.jsx)("h2",{className:"tit",children:"Asset"}),Object(K.jsxs)(O,{children:[Object(K.jsxs)("div",{children:[Object(K.jsx)("span",{children:"Token"}),Object(K.jsx)("span",{className:"asset__balance",children:"Balance"}),Object(K.jsx)("span",{className:"asset__value",children:"Value"}),Object(K.jsx)("span",{children:"Total"})]}),t.sort((function(e,n){return e.id-n.id})).map((function(e){return Object(K.jsxs)(x,{onClick:function(){return n=e.name,p("/swap/".concat(n)),void j(Object(L.d)("swap"));var n},children:[Object(K.jsxs)("div",{children:[Object(K.jsx)(A.a,{stockName:e.name}),e.name]}),Object(K.jsx)("div",{children:e.balance.toLocaleString("ko-KR")}),Object(K.jsxs)("div",{className:"asset__value",children:[e.value.toLocaleString("ko-KR"),Object(K.jsx)(A.a,{stockName:"KLAY"})]}),Object(K.jsxs)("div",{children:[(e.balance*e.value).toLocaleString("ko-KR"),Object(K.jsx)(A.a,{stockName:"KLAY"})]})]},e.id)}))]}),Object(K.jsx)("h2",{className:"subtit",children:"Pool"}),Object(K.jsxs)(O,{children:[Object(K.jsxs)("div",{children:[Object(K.jsx)("span",{children:"Pool"}),Object(K.jsx)("span",{children:"LPToken"}),Object(K.jsx)("span",{className:"pool__balance",children:"Balance"}),Object(K.jsx)("span",{children:"ROI"})]}),o.sort((function(e,n){return e.id-n.id})).map((function(e){var n=e.id,t=Object(i.a)(e,Y);return Object(K.jsx)(G,Object(s.a)({id:n},t),n)}))]}),Object(K.jsx)("h2",{className:"subtit",children:"Govern"}),Object(K.jsxs)(O,{children:[Object(K.jsxs)("div",{children:[Object(K.jsx)("span",{children:"Gover ID"}),Object(K.jsx)("span",{children:"End Time"})]}),Object(K.jsx)(I,{})]})]})})}}}]);